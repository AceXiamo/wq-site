import{ag as k,j as x,r as g,N as A,ah as S,a as v,a0 as R,H as B,ai as j,aj as T,ak as L,l as m,al as q,am as H,an as I,ae as P,_ as N}from"./entry.89a40982.js";import{u as C}from"./preview.48e515ee.js";const F=()=>null;function X(...t){const n=typeof t[t.length-1]=="string"?t.pop():void 0;typeof t[0]!="string"&&t.unshift(n);let[r,i,a={}]=t;if(typeof r!="string")throw new TypeError("[nuxt] [asyncData] key must be a string.");if(typeof i!="function")throw new TypeError("[nuxt] [asyncData] handler must be a function.");a.server=a.server??!0,a.default=a.default??F,a.lazy=a.lazy??!1,a.immediate=a.immediate??!0;const s=x(),e=()=>s.isHydrating?s.payload.data[r]:s.static.data[r],c=()=>e()!==void 0;(!s._asyncData[r]||!a.immediate)&&(s._asyncData[r]={data:g(e()??a.default()),pending:g(!c()),error:A(s.payload._errors,r),status:g("idle")});const o={...s._asyncData[r]};o.refresh=o.execute=(l={})=>{if(s._asyncDataPromises[r]){if(l.dedupe===!1)return s._asyncDataPromises[r];s._asyncDataPromises[r].cancelled=!0}if((l._initial||s.isHydrating&&l._initial!==!1)&&c())return e();o.pending.value=!0,o.status.value="pending";const h=new Promise((u,d)=>{try{u(i(s))}catch(O){d(O)}}).then(u=>{if(h.cancelled)return s._asyncDataPromises[r];let d=u;a.transform&&(d=a.transform(u)),a.pick&&(d=M(d,a.pick)),o.data.value=d,o.error.value=null,o.status.value="success"}).catch(u=>{if(h.cancelled)return s._asyncDataPromises[r];o.error.value=u,o.data.value=B(a.default()),o.status.value="error"}).finally(()=>{h.cancelled||(o.pending.value=!1,s.payload.data[r]=o.data.value,o.error.value&&(s.payload._errors[r]=j(o.error.value)),delete s._asyncDataPromises[r])});return s._asyncDataPromises[r]=h,s._asyncDataPromises[r]};const p=()=>o.refresh({_initial:!0}),_=a.server!==!1&&s.payload.serverRendered;{const l=T();if(l&&!l._nuxtOnBeforeMountCbs){l._nuxtOnBeforeMountCbs=[];const u=l._nuxtOnBeforeMountCbs;l&&(S(()=>{u.forEach(d=>{d()}),u.splice(0,u.length)}),v(()=>u.splice(0,u.length)))}_&&s.isHydrating&&c()?(o.pending.value=!1,o.status.value=o.error.value?"error":"success"):l&&(s.payload.serverRendered&&s.isHydrating||a.lazy)&&a.immediate?l._nuxtOnBeforeMountCbs.push(p):a.immediate&&p(),a.watch&&R(a.watch,()=>o.refresh());const h=s.hook("app:data:refresh",u=>{if(!u||u.includes(r))return o.refresh()});l&&v(h)}const y=Promise.resolve(s._asyncDataPromises[r]).then(()=>o);return Object.assign(y,o),y}async function Y(t){await new Promise(r=>k(r));const n=t?Array.isArray(t)?t:[t]:void 0;await x().hooks.callHookParallel("app:data:refresh",n)}function M(t,n){const r={};for(const i of n)r[i]=t[i];return r}const D=(t,n)=>n.split(".").reduce((r,i)=>r&&r[i],t),w=(t,n)=>Object.keys(t).filter(n).reduce((r,i)=>Object.assign(r,{[i]:t[i]}),{}),Z=t=>n=>t&&t.length?w(n,r=>!t.includes(r)):n,ee=t=>n=>Array.isArray(n)?n.map(r=>t(r)):t(n),$=t=>{const n=[],r=[];for(const i of t)["$","_"].includes(i)?n.push(i):r.push(i);return{prefixes:n,properties:r}},te=(t=[])=>n=>{if(t.length===0||!n)return n;const{prefixes:r,properties:i}=$(t);return w(n,a=>!i.includes(a)&&!r.includes(a[0]))},re=(t=[])=>n=>{if(t.length===0||!n)return n;const{prefixes:r,properties:i}=$(t);return w(n,a=>i.includes(a)||r.includes(a[0]))},ne=(t,n)=>{const r=new Intl.Collator(n.$locale,{numeric:n.$numeric,caseFirst:n.$caseFirst,sensitivity:n.$sensitivity}),i=Object.keys(n).filter(a=>!a.startsWith("$"));for(const a of i)t=t.sort((s,e)=>{const c=[D(s,a),D(e,a)].map(o=>{if(o!==null)return o instanceof Date?o.toISOString():o});return n[a]===-1&&c.reverse(),r.compare(c[0],c[1])});return t},ae=(t,n="Expected an array")=>{if(!Array.isArray(t))throw new TypeError(n)},f=t=>Array.isArray(t)?t:[void 0,null].includes(t)?[]:[t],Q=["sort","where","only","without"];function U(t,n={}){const r={};for(const e of Object.keys(n.initialParams||{}))r[e]=Q.includes(e)?f(n.initialParams[e]):n.initialParams[e];const i=(e,c=o=>o)=>(...o)=>(r[e]=c(...o),s),a=e=>{var c;return n.legacy?e!=null&&e.surround?e.surround:e&&(e!=null&&e.dirConfig&&(e.result={_path:(c=e.dirConfig)==null?void 0:c._path,...e.result,_dir:e.dirConfig}),e!=null&&e._path||Array.isArray(e)||!Object.prototype.hasOwnProperty.call(e,"result")?e:e==null?void 0:e.result):e},s={params:()=>({...r,...r.where?{where:[...f(r.where)]}:{},...r.sort?{sort:[...f(r.sort)]}:{}}),only:i("only",f),without:i("without",f),where:i("where",e=>[...f(r.where),...f(e)]),sort:i("sort",e=>[...f(r.sort),...f(e)]),limit:i("limit",e=>parseInt(String(e),10)),skip:i("skip",e=>parseInt(String(e),10)),find:()=>t(s).then(a),findOne:()=>t(i("first")(!0)).then(a),count:()=>t(i("count")(!0)).then(a),locale:e=>s.where({_locale:e}),withSurround:i("surround",(e,c)=>({query:e,...c})),withDirConfig:()=>i("dirConfig")(!0)};return n.legacy&&(s.findSurround=(e,c)=>s.withSurround(e,c).find().then(a)),s}function E(t){return JSON.stringify(t,z)}function z(t,n){return n instanceof RegExp?`--REGEX ${n.toString()}`:n}const K=t=>{let n=E(t);return n=typeof Buffer<"u"?Buffer.from(n).toString("base64"):btoa(n),n=n.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,""),(n.match(/.{1,100}/g)||[]).join("/")},b=t=>L(t,m().public.content.api.baseURL),se=()=>{throw console.warn("useContent is only accessible when you are using `documentDriven` mode."),console.warn("Learn more by visiting: https://content.nuxt.com/document-driven"),new Error("useContent is only accessible when you are using `documentDriven` mode.")},G=()=>{const{experimental:t}=m().public.content;return t.clientDB?!0:C().isEnabled()},W=()=>async t=>{const{content:n}=m().public,r=t.params(),i=n.experimental.stripQueryParameters?b(`/query/${`${P(r)}.${n.integrity}`}/${K(r)}.json`):b(`/query/${P(r)}.${n.integrity}.json`);if(G())return(await N(()=>import("./client-db.b5279482.js"),["./client-db.b5279482.js","./entry.89a40982.js","./index.288f722b.js","./_commonjsHelpers.725317a4.js","./preview.48e515ee.js"],import.meta.url).then(e=>e.useContentDatabase())).fetch(t);const a=await $fetch(i,{method:"GET",responseType:"json",params:n.experimental.stripQueryParameters?void 0:{_params:E(r),previewToken:C().getPreviewToken()}});if(typeof a=="string"&&a.startsWith("<!DOCTYPE html>"))throw new Error("Not found");return a};function ie(t,...n){const{content:r}=m().public,i=U(W(),{initialParams:typeof t!="string"?t:{},legacy:!0});let a;typeof t=="string"&&(a=q(H(t,...n)));const s=i.params;return i.params=()=>{var c,o,p;const e=s();return a&&(e.where=e.where||[],e.first&&(e.where||[]).length===0?e.where.push({_path:I(a)}):e.where.push({_path:new RegExp(`^${a.replace(/[-[\]{}()*+.,^$\s/]/g,"\\$&")}`)})),(c=e.sort)!=null&&c.length||(e.sort=[{_file:1,$numeric:!0}]),r.locales.length&&((p=(o=e.where)==null?void 0:o.find(y=>y._locale))!=null&&p._locale||(e.where=e.where||[],e.where.push({_locale:r.defaultLocale}))),e},i}export{X as a,ae as b,f as c,ne as d,K as e,ee as f,D as g,te as h,re as i,E as j,U as k,Z as o,ie as q,Y as r,G as s,se as u,b as w};
